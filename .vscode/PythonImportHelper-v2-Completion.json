[
    {
        "label": "Flask",
        "importPath": "flask",
        "description": "flask",
        "isExtraImport": true,
        "detail": "flask",
        "documentation": {}
    },
    {
        "label": "jsonify",
        "importPath": "flask",
        "description": "flask",
        "isExtraImport": true,
        "detail": "flask",
        "documentation": {}
    },
    {
        "label": "request",
        "importPath": "flask",
        "description": "flask",
        "isExtraImport": true,
        "detail": "flask",
        "documentation": {}
    },
    {
        "label": "SQLAlchemy",
        "importPath": "flask_sqlalchemy",
        "description": "flask_sqlalchemy",
        "isExtraImport": true,
        "detail": "flask_sqlalchemy",
        "documentation": {}
    },
    {
        "label": "ValidationError",
        "importPath": "marshmallow",
        "description": "marshmallow",
        "isExtraImport": true,
        "detail": "marshmallow",
        "documentation": {}
    },
    {
        "label": "select",
        "importPath": "sqlalchemy",
        "description": "sqlalchemy",
        "isExtraImport": true,
        "detail": "sqlalchemy",
        "documentation": {}
    },
    {
        "label": "DeclarativeBase",
        "importPath": "sqlalchemy.orm",
        "description": "sqlalchemy.orm",
        "isExtraImport": true,
        "detail": "sqlalchemy.orm",
        "documentation": {}
    },
    {
        "label": "Mapped",
        "importPath": "sqlalchemy.orm",
        "description": "sqlalchemy.orm",
        "isExtraImport": true,
        "detail": "sqlalchemy.orm",
        "documentation": {}
    },
    {
        "label": "mapped_column",
        "importPath": "sqlalchemy.orm",
        "description": "sqlalchemy.orm",
        "isExtraImport": true,
        "detail": "sqlalchemy.orm",
        "documentation": {}
    },
    {
        "label": "date",
        "importPath": "datetime",
        "description": "datetime",
        "isExtraImport": true,
        "detail": "datetime",
        "documentation": {}
    },
    {
        "label": "List",
        "importPath": "typing",
        "description": "typing",
        "isExtraImport": true,
        "detail": "typing",
        "documentation": {}
    },
    {
        "label": "Marshmallow",
        "importPath": "flask_marshmallow",
        "description": "flask_marshmallow",
        "isExtraImport": true,
        "detail": "flask_marshmallow",
        "documentation": {}
    },
    {
        "label": "Base",
        "kind": 6,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "class Base(DeclarativeBase):\n    pass\ndb = SQLAlchemy(model_class=Base)\nma = Marshmallow()\ndb.init_app(app)\nma.init_app(app)\nservice_mechanic = db.Table(\n    \"service_mechanic\",\n    Base.metadata,\n    db.Column(\"ticket_id\", db.ForeignKey(\"service_tickets.id\")),",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "Customer",
        "kind": 6,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "class Customer(Base):\n    __tablename__ = \"customers\"\n    id: Mapped[int] = mapped_column(primary_key=True)\n    name: Mapped[str] = mapped_column(db.String(255), nullable=False)\n    email: Mapped[str] = mapped_column(db.String(320), nullable=False, unique=True)\n    phone: Mapped[str] = mapped_column(db.String(16), nullable=False)\n    tickets: Mapped[List[\"ServiceTicket\"]] = db.relationship(back_populates=\"customers\")\nclass ServiceTicket(Base):\n    __tablename__ = \"service_tickets\"\n    id: Mapped[int] = mapped_column(primary_key=True)",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "ServiceTicket",
        "kind": 6,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "class ServiceTicket(Base):\n    __tablename__ = \"service_tickets\"\n    id: Mapped[int] = mapped_column(primary_key=True)\n    service_date: Mapped[date]\n    VIN: Mapped[str] = mapped_column(db.String(17), nullable=False)\n    service_desc: Mapped[str] = mapped_column(db.String(500), nullable=False)\n    customer_id: Mapped[int] = mapped_column(db.ForeignKey(\"customers.id\"), nullable=False)\n    customers: Mapped[\"Customer\"] = db.relationship(back_populates=\"tickets\")\n    mechanics: Mapped[List[\"Mechanic\"]] = db.relationship(secondary=service_mechanic, back_populates=\"tickets\")\nclass Mechanic(Base):",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "Mechanic",
        "kind": 6,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "class Mechanic(Base):\n    __tablename__ = \"mechanics\"\n    id: Mapped[int] = mapped_column(primary_key=True)\n    name: Mapped[str] = mapped_column(db.String(255), nullable=False)\n    email: Mapped[str] = mapped_column(db.String(320), nullable=False, unique=True)\n    salary: Mapped[float] = mapped_column(db.Float(), nullable=False)\n    tickets: Mapped[List[\"ServiceTicket\"]] = db.relationship(\n        secondary=service_mechanic, back_populates=\"mechanics\"\n    )\n# *---------- SCHEMAS ----------",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "CustomerSchema",
        "kind": 6,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "class CustomerSchema(ma.SQLAlchemyAutoSchema):\n    class Meta:\n        model = Customer\ncustomer_schema = CustomerSchema()\ncustomers_schema = CustomerSchema(many=True)\n# * ---------- Endpoints/Routes ----------\n# Create a new customer\n@app.route(\"/customers\", methods=[\"POST\"])\ndef create_customer():\n    try:",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "create_customer",
        "kind": 2,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "def create_customer():\n    try:\n        customer_data = customer_schema.load(request.json)\n    except ValidationError as e:\n        return jsonify(e.messages), 400\n    query = select(Customer).where(Customer.email == customer_data[\"email\"])\n    customer = db.session.execute(query).scalars().first()\n    if customer:  # returns True and access if-block\n        return jsonify({\"error\": \"email already associated with another account\"}), 400\n    new_customer = Customer(**customer_data)",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "get_customers",
        "kind": 2,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "def get_customers():\n    query = select(Customer)\n    customers = db.session.execute(query).scalars().all()\n    return customers_schema.jsonify(customers)\n# Get a customer\n@app.route('/customers/<int:customer_id>', methods=['GET'])\ndef get_customer(customer_id):\n    customer = db.session.get(Customer, customer_id)\n    if customer:\n        return customer_schema.jsonify(customer), 200",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "get_customer",
        "kind": 2,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "def get_customer(customer_id):\n    customer = db.session.get(Customer, customer_id)\n    if customer:\n        return customer_schema.jsonify(customer), 200\n    return jsonify({\"error\": \"Invalid customer ID\"}), 400\n# Update a customer\n@app.route('/customers/<int:customer_id>', methods=['PUT'])\ndef update_customer(customer_id):\n    customer = db.session.get(Customer, customer_id)\n    if not customer:",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "update_customer",
        "kind": 2,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "def update_customer(customer_id):\n    customer = db.session.get(Customer, customer_id)\n    if not customer:\n        return jsonify({\"error\": \"Invalid customer ID\"}), 400\n    try:\n        customer_data = customer_schema.load(request.json)\n    except ValidationError as e:\n        return jsonify(e.messages), 400\n    # Check if the email already exists for another customer\n    query = select(Customer).where(Customer.email == customer_data[\"email\"])",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "delete_customer",
        "kind": 2,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "def delete_customer(customer_id):\n    customer = db.session.get(Customer, customer_id)\n    if not customer:\n        return jsonify({\"error\": \"Invalid customer ID\"}), 400\n    db.session.delete(customer)\n    db.session.commit()\n    return jsonify({\"message\": \"Customer deleted successfully\"}), 200\nwith app.app_context():\n    db.drop_all()\n    db.create_all()",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "app",
        "kind": 5,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "app = Flask(__name__)\napp.config[\"SQLALCHEMY_DATABASE_URI\"] = \"sqlite:///app.db\"\nclass Base(DeclarativeBase):\n    pass\ndb = SQLAlchemy(model_class=Base)\nma = Marshmallow()\ndb.init_app(app)\nma.init_app(app)\nservice_mechanic = db.Table(\n    \"service_mechanic\",",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "app.config[\"SQLALCHEMY_DATABASE_URI\"]",
        "kind": 5,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "app.config[\"SQLALCHEMY_DATABASE_URI\"] = \"sqlite:///app.db\"\nclass Base(DeclarativeBase):\n    pass\ndb = SQLAlchemy(model_class=Base)\nma = Marshmallow()\ndb.init_app(app)\nma.init_app(app)\nservice_mechanic = db.Table(\n    \"service_mechanic\",\n    Base.metadata,",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "db",
        "kind": 5,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "db = SQLAlchemy(model_class=Base)\nma = Marshmallow()\ndb.init_app(app)\nma.init_app(app)\nservice_mechanic = db.Table(\n    \"service_mechanic\",\n    Base.metadata,\n    db.Column(\"ticket_id\", db.ForeignKey(\"service_tickets.id\")),\n    db.Column(\"mechanic_id\", db.ForeignKey(\"mechanics.id\")),\n)",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "ma",
        "kind": 5,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "ma = Marshmallow()\ndb.init_app(app)\nma.init_app(app)\nservice_mechanic = db.Table(\n    \"service_mechanic\",\n    Base.metadata,\n    db.Column(\"ticket_id\", db.ForeignKey(\"service_tickets.id\")),\n    db.Column(\"mechanic_id\", db.ForeignKey(\"mechanics.id\")),\n)\n# * ---------- Models ----------",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "service_mechanic",
        "kind": 5,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "service_mechanic = db.Table(\n    \"service_mechanic\",\n    Base.metadata,\n    db.Column(\"ticket_id\", db.ForeignKey(\"service_tickets.id\")),\n    db.Column(\"mechanic_id\", db.ForeignKey(\"mechanics.id\")),\n)\n# * ---------- Models ----------\nclass Customer(Base):\n    __tablename__ = \"customers\"\n    id: Mapped[int] = mapped_column(primary_key=True)",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "customer_schema",
        "kind": 5,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "customer_schema = CustomerSchema()\ncustomers_schema = CustomerSchema(many=True)\n# * ---------- Endpoints/Routes ----------\n# Create a new customer\n@app.route(\"/customers\", methods=[\"POST\"])\ndef create_customer():\n    try:\n        customer_data = customer_schema.load(request.json)\n    except ValidationError as e:\n        return jsonify(e.messages), 400",
        "detail": "app",
        "documentation": {}
    },
    {
        "label": "customers_schema",
        "kind": 5,
        "importPath": "app",
        "description": "app",
        "peekOfCode": "customers_schema = CustomerSchema(many=True)\n# * ---------- Endpoints/Routes ----------\n# Create a new customer\n@app.route(\"/customers\", methods=[\"POST\"])\ndef create_customer():\n    try:\n        customer_data = customer_schema.load(request.json)\n    except ValidationError as e:\n        return jsonify(e.messages), 400\n    query = select(Customer).where(Customer.email == customer_data[\"email\"])",
        "detail": "app",
        "documentation": {}
    }
]